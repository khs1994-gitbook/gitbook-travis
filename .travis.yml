language: bash
sudo: required
services:
- docker
before_script:
- openssl aes-256-cbc -K $encrypted_9cc1f37f0fdd_key -iv $encrypted_9cc1f37f0fdd_iv
  -in khs1994-robot.enc -out ~/.ssh/id_rsa -d
- chmod 600 ~/.ssh/id_rsa
- git config --global user.name "khs1994-merge-robot"
- git config --global user.email "ai@khs1994.com"
- export TZ='Asia/Shanghai'
- date
- export DEPLOY_BRANCH=gh-pages
script:
- cd ~
- export REPO=$REPO_4
- export REPO_ALIYUN=$REPO_ALIYUN_4
- git clone --depth=1 --branch=5.5 $REPO repo
- cd repo
- $TRAVIS_BUILD_DIR/deploy.sh laravel.docs.khs1994.com
# - cd ~
# - export REPO=$REPO_5
# - export REPO_ALIYUN=$REPO_ALIYUN_5
# - git clone --depth=1 --branch=5.5 $REPO repo
# - cd repo
# - $TRAVIS_BUILD_DIR/deploy.sh
- cd ~
- git clone --depth=1 git@github.com:feiskyer/kubernetes-handbook.git k8s
- cd k8s/zh
- cp $TRAVIS_BUILD_DIR/k8s/book.json book.json
- export REPO=$REPO_1
- $TRAVIS_BUILD_DIR/deploy.sh k8s.docs.khs1994.com
- cd ~
- git clone --depth=1 git@github.com:DocsHome/nginx-docs.git
- cd nginx-docs
- export REPO=$REPO_7
- $TRAVIS_BUILD_DIR/deploy.sh nginx.docs.khs1994.com
- cd ~
install:
- echo $PWD
env:
  global:
  - REPO_1: git@github.com:khs1994-docs/kubernetes-handbook.git
  - REPO_4: git@github.com:khs1994-docs/laravel-docs-en.git
  - REPO_5: git@github.com:khs1994-docs/laravel-docs.git
  - REPO_6: git@github.com:khs1994-docs/laravel-5.4.git
  - REPO_7: git@github.com:khs1994-docs/nginx-docs.git
addons:
  ssh_known_hosts:
  - github.com
branches:
  only:
  - master
